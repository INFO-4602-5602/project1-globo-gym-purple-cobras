<html>
<head>
<title>Zayo Market Visualization</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script> -->

<script src="https://d3js.org/d3.v3.min.js"></script>

<!-- Fancy tooltips -->
<script src="lib/d3.tip.v0.6.3.js"></script>

<!-- Maps -->
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.35.0/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.35.0/mapbox-gl.css' rel='stylesheet' />

<!-- Pretty formats -->
<script async defer src="https://api.mapbox.com/mapbox-assembly/v0.12.0/assembly.js"></script>
<link href="https://api.mapbox.com/mapbox-assembly/v0.12.0/assembly.min.css" rel="stylesheet">

<link href="css/main.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="css/melissa.css"></link>


<script src="js/page.js"></script>
</head>

<body>
  <header>
    <h1 class="txt-h1">Project 1: Zayo Market Visualization</h1>
    <h3 class="txt-h3">Jennings Anderson, Melissa Bica, Kyle Frye, Chase Kregor, Taylor Lawrence</h3>
  </header>

  <section id="map-section">
    <div class="grid grid--gut12">
      <div class="col col--1"></div>

      <div class="col col--7 pl0" id="map"></div>

      <div id="map-interaction" class="col col--3" style="opacity: 0.5;" >
        <h5 class="txt-h5 border-b mb6">Filters</h5>
        <label class='switch-container'>
          <input type='checkbox' checked='checked' onClick="toggleMapLayerVis('on-network')"/>
          <div class='onNetworkSwitch switch'></div>
            <span class="px6">On Network</span>
        </label><br>
        <label class='switch-container'>
          <input type='checkbox' checked='checked' onClick="toggleMapLayerVis('off-network')"/>
          <div class='offNetworkSwitch switch'></div>
            <span class="px6">Off Network</span>
        </label><br>
        <!-- <label> -->
          <!-- Minimum Building Cost
          <div class='range range--s'>
            <p class="pr6" id='min_cost_val'>0</p>
            <input id="min_cost" type='range' step="500000" value="0" min="0" max="20000000"/>
          </div>
        </label>
        <label> -->
          Maximum Building Cost
          <div class='range range--s'>
            <input id="max_cost" type='range' step="0.1" min="4.6"/>
            <p class="pr6" id='max_cost_val'></p>
          </div>
        </label>

        <div class="col col--2">

          <h5 class="txt-h5 border-b mb6">Opportunities</h5>
          <label class='switch-container'>
            <input id="opp-0" type='checkbox' onClick="toggleAllOpportunity()"/>
            <div class='switch opp_switch'></div>
              <span class="px6">Show Only Buildings with Opportunities</span>
          </label><br>
          <div id="opp-filters">
            <label class='ml12 switch-container'>
              <input id="opp-1" type='checkbox' onClick="toggleOpportunity('opp_1')"/>
              <div class='switch opp_switch'></div>
                <span class="px6">Working</span>
            </label><br>
            <label class='ml12 switch-container'>
              <input id="opp-2" type='checkbox' onClick="toggleOpportunity('opp_2')"/>
              <div class='switch opp_switch'></div>
                <span class="px6">Best Case</span>
            </label><br>
            <label class='ml12 switch-container'>
              <input id="opp-3" type='checkbox' onClick="toggleOpportunity('opp_3')"/>
              <div class='switch opp_switch'></div>
                <span class="px6">Committed</span>
            </label><br>
            <label class='ml12 switch-container'>
              <input id="opp-5" type='checkbox' onClick="toggleOpportunity('opp_5')"/>
              <div class='switch opp_switch'></div>
                <span class="px6">Accepted</span>
            </label><br>
            <label class='ml12 switch-container'>
              <input id="opp-4" type='checkbox' onClick="toggleOpportunity('opp_4')"/>
              <div class='switch opp_switch'></div>
                <span class="px6">Closed</span>
            </label><br>
            <label class='ml12 switch-container'>
              <input id="opp-lost" type='checkbox' onClick="toggleOpportunity('opp_lost')"/>
              <div class='switch opp_switch'></div>
                <span class="px6">Closed (Lost)</span>
            </label>
          </div>
        </div>

        <div class="col col--2">
          <h5 class="txt-h5 border-b mb6">Opportunities</h5>
          <label class='switch-container'>
            <input id="opp-0" type='checkbox' onClick="toggleAllOpportunity()"/>
            <div class='switch opp_switch'></div>
              <span class="px6">Show Only Buildings with Opportunities</span>
          </label><br>
          <div id="opp-filters">
            <label class='ml12 switch-container'>
              <input id="opp-1" type='checkbox' onClick="toggleOpportunity('opp_1')"/>
              <div class='switch opp_switch'></div>
                <span class="px6">Working</span>
            </label><br>
            <label class='ml12 switch-container'>
              <input id="opp-2" type='checkbox' onClick="toggleOpportunity('opp_2')"/>
              <div class='switch opp_switch'></div>
                <span class="px6">Best Case</span>
            </label><br>
            <label class='ml12 switch-container'>
              <input id="opp-3" type='checkbox' onClick="toggleOpportunity('opp_3')"/>
              <div class='switch opp_switch'></div>
                <span class="px6">Committed</span>
            </label><br>
            <label class='ml12 switch-container'>
              <input id="opp-5" type='checkbox' onClick="toggleOpportunity('opp_5')"/>
              <div class='switch opp_switch'></div>
                <span class="px6">Accepted</span>
            </label><br>
            <label class='ml12 switch-container'>
              <input id="opp-4" type='checkbox' onClick="toggleOpportunity('opp_4')"/>
              <div class='switch opp_switch'></div>
                <span class="px6">Closed</span>
            </label><br>
            <label class='ml12 switch-container'>
              <input id="opp-lost" type='checkbox' onClick="toggleOpportunity('opp_lost')"/>
              <div class='switch opp_switch'></div>
                <span class="px6">Closed (Lost)</span>
            </label>
          </div>
        </div>




      </div>
    </div>
    <script src="js/map_base.js"></script>
    <script src="js/map_interaction.js"></script>

    <div id="map-vis-description">
      <button id='map-desc-button' class='btn' onClick="toggleVis('map-desc-button','map-desc-prose')">Description</button>
      <p id='map-desc-prose' class="prose" style="display:none;">
        Description of how this map works and what it shows
      </p>
    </div>
  </section>

  <!-- Section 2: Products -->
  <div class='grid'>
    <div id='product' class="col col--6">
      <h4 class="txt-h4">Products</h4>
        <div id="barchart"></div>
    </div>

    <script src="js/products.js"></script>


<!-- Section 3: Markets -->
    <div id='product' class="col col--6">
      <h4 class="txt-h4">Revenue</h4>
        <div id="barchart"></div>
    </div>
  </div>



  <script>
    var pageData

    // Load all the data into the DOM (going to slow things down....)
    function runPage(directory){
      pageData = new DataObject({dir: directory})
      pageData.load()
      var pause = setInterval(function(){
        if (pageData.onNetworkBuildings && pageData.offNetworkBuildings && pageData.products && pageData.services){
          clearInterval(pause);
          console.log("Data loaded, data available inside of pageData Object")

          //Anything to do with the data should be run HERE (kick off scripts located in external files (inside js folder))

          //Call Map
          loadMap();

          //Call Products VIs
          createProductsVis();

        }else {
          console.log("Data Still loading, waiting for 0.5 seconds")
        }
      },500)
    }

    //Default:
    runPage('data')
  </script>

</body>
</html>
